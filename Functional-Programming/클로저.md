# 클로저

학습 의존성: 자바스크립트 동작원리, 실행컨텍스트

클로저란 무엇인가?

간단한 정의는 내부의 렉시컬 환경에서 외부의 렉시컬환경에 속한 값을 참조할 수 있는 것입니다.

왜 사용하는가?

개발 중에 변수명을 지었다가 덮는 경우는 흔합니다. 이런 참사를 클로저로 막을 수 있습니다.

모르면 큰일나나요? 넹 큰일납니다.

어떻게 사용하는가?

클로저는 메모리 비용이 비쌉니다.

```js
let funcName = (function () {
  const x = 10;
  return function () {
    return x;
  };
})();

console.log(funcName()); // 10
```

코드의 실행방식을 묘사해보겠습니다. `let`으로 유연하게 식별자 `funcName`을 정의합니다. funcName은 즉시실행 함수를 할당합니다. 할당하는 함수가 즉시실행함수이기 때문에 즉시실행 함수의 반환값인 내부의 함수가 할당됩니다. 즉시실행 함수의 반환값으로 할당된 함수는 즉시실행 함수의 렉시컬 환경에서 정의되어있지만 `return`으로 유출되었습니다. 유출된 함수 속에 `x`식별자는 정의된 외부 렉시컬 환경의 `const x = 10`을 접근합니다. 보호받고 있는 `10`을 접근하고 싶으면 `funcName()`함수를 통해서만 가능합니다.

이렇게 작성하는 이유는 그 누구도 실수로 `funcName` 내부에 있는 `x`를 덮어 쓸 수 없습니다.

의도적으로 클로저 함수는 let으로 정의합니다. 나중에 `funcName = null`으로 더이상 함수를 참조하지 않게 해서 가비지컬렉팅 대상이 되도록 합니다.

지연실행 응용도 가능합니다.
